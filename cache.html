
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    

    <title>Retrieved Items (aka ,,Caches’‘) &mdash; python-glyr 0.9.9beta documentation</title>

<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"/>


    
    <link rel="stylesheet" href="_static/rtd.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.9.9beta',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/searchtools.js"></script>
    <link rel="top" title="python-glyr 0.9.9beta documentation" href="index.html" />
    <link rel="next" title="Looking up Providers" href="provider.html" />
    <link rel="prev" title="Building Queries" href="query.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="provider.html" title="Looking up Providers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="query.html" title="Building Queries"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">python-glyr 0.9.9beta documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="retrieved-items-aka-caches">
<h1>Retrieved Items (aka ,,Caches&#8217;&#8216;)<a class="headerlink" href="#retrieved-items-aka-caches" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-a-cache">
<h2>What is a Cache?<a class="headerlink" href="#what-is-a-cache" title="Permalink to this headline">¶</a></h2>
<p>Basically every single bit of metadata returned from <strong>libglyr</strong> is a Cache.
It is basically a <em>result</em> or it is sometimes referred to as an item.
It encapsulates basic attributes like a bytearray of data,
a checksum, an optional imageformat and some more.</p>
</div>
<div class="section" id="what-can-i-do-with-one">
<h2>What can I do with one?<a class="headerlink" href="#what-can-i-do-with-one" title="Permalink to this headline">¶</a></h2>
<p>Caches can be...</p>
<ul class="simple">
<li>… committed to a local database (see next section)</li>
<li>… written to HD via it&#8217;s <tt class="docutils literal"><span class="pre">write()</span></tt> method.</li>
<li>… printed to stdout via <tt class="docutils literal"><span class="pre">print()</span></tt>, currently <tt class="docutils literal"><span class="pre">__repr__</span></tt> is not implemented.</li>
</ul>
<p>You can use the <em>data</em> property to get the actual metadata.
This is always a bytestring, even with lyrics.
You have to convert it to the desired encoding (e.g. utf-8) like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">str</span><span class="p">(</span><span class="n">some_cache</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="s">&#39;utf-8&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This might throw an UnicodeError on non-utf8 input, or imagedata.
Use the Query-Property <strong>force_utf8</strong> to only retrieve valid utf-8 textitems.</p>
</div>
<p>The <em>data</em> property is settable. Setting will also cause the size and checksum to be adjusted.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Cache implements the __eq__ and __ne__ operator, which will compare only the data properties.
This is meant to be a shortcut, since comparing data is usually the only thing you want to compare.</p>
</div>
</div>
<div class="section" id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="plyr.Cache">
<em class="property">class </em><tt class="descclassname">plyr.</tt><tt class="descname">Cache</tt><a class="headerlink" href="#plyr.Cache" title="Permalink to this definition">¶</a></dt>
<dd><p>A Cache is one result or item retrieved by libglyr</p>
<p>It encapsulates various properties like ,,data&#8217;&#8216;, ,,checksum&#8217;&#8217;
or ,,image_format&#8217;&#8217; and quite some more.</p>
<p>It can be instanciated directly, but there is no valid use to do so currently.</p>
<dl class="attribute">
<dt id="plyr.Cache.checksum">
<tt class="descname">checksum</tt><a class="headerlink" href="#plyr.Cache.checksum" title="Permalink to this definition">¶</a></dt>
<dd><p>A 16 byte md5sum checksum in hexadecimal string-representation of the data field.</p>
<p>You usually should use update_checksum(),
this is only if you already luckily have some
correct checksum lying there by accident.</p>
</dd></dl>

<dl class="attribute">
<dt id="plyr.Cache.data">
<tt class="descname">data</tt><a class="headerlink" href="#plyr.Cache.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Actual data as bytestring. Also settable.</p>
</dd></dl>

<dl class="attribute">
<dt id="plyr.Cache.data_type">
<tt class="descname">data_type</tt><a class="headerlink" href="#plyr.Cache.data_type" title="Permalink to this definition">¶</a></dt>
<dd><p>The type of data - this may differ from the get_type</p>
</dd></dl>

<dl class="attribute">
<dt id="plyr.Cache.duration">
<tt class="descname">duration</tt><a class="headerlink" href="#plyr.Cache.duration" title="Permalink to this definition">¶</a></dt>
<dd><p>Duration in seconds, only filled for &#8220;tracklist&#8221;, otherwise 0.</p>
</dd></dl>

<dl class="attribute">
<dt id="plyr.Cache.image_format">
<tt class="descname">image_format</tt><a class="headerlink" href="#plyr.Cache.image_format" title="Permalink to this definition">¶</a></dt>
<dd><p>The format of the image, might be one of:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">png</span><span class="p">,</span> <span class="n">jpeg</span><span class="p">,</span> <span class="n">gif</span><span class="p">,</span> <span class="n">tiff</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="plyr.Cache.is_cached">
<tt class="descname">is_cached</tt><a class="headerlink" href="#plyr.Cache.is_cached" title="Permalink to this definition">¶</a></dt>
<dd><p>Did this item come from a local database?</p>
</dd></dl>

<dl class="attribute">
<dt id="plyr.Cache.is_image">
<tt class="descname">is_image</tt><a class="headerlink" href="#plyr.Cache.is_image" title="Permalink to this definition">¶</a></dt>
<dd><p>A boolean. Set to true if this item contains image data.</p>
</dd></dl>

<dl class="method">
<dt id="plyr.Cache.print_cache">
<tt class="descname">print_cache</tt><big>(</big><big>)</big><a class="headerlink" href="#plyr.Cache.print_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Pretty print of the cache to stdout.</p>
<p>There is no __repr__ at the moment.</p>
</dd></dl>

<dl class="attribute">
<dt id="plyr.Cache.provider">
<tt class="descname">provider</tt><a class="headerlink" href="#plyr.Cache.provider" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the provider where this items was retrieved from.</p>
</dd></dl>

<dl class="attribute">
<dt id="plyr.Cache.rating">
<tt class="descname">rating</tt><a class="headerlink" href="#plyr.Cache.rating" title="Permalink to this definition">¶</a></dt>
<dd><p>The rating of this item, this is for you to set, libglyr
will always set it to 0 by default. The only case where
rating has a semantic meaning is for Database lookups:</p>
<p>If more than one item is requested, the items are returned
sorted by the rating (highest rating first), and as second
criteria by the timestamp, so the item with the highest rating,
and the newest timestamp is always first.</p>
<p>This is useful to insert &#8220;dummies&#8221; to the db, in case some item
was not found.</p>
</dd></dl>

<dl class="attribute">
<dt id="plyr.Cache.size">
<tt class="descname">size</tt><a class="headerlink" href="#plyr.Cache.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Size in bytes of data - this is not useful in Python, as you could do also:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">len</span><span class="p">(</span><span class="n">mycache</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>This attribute is not settable, since you could screw things up.</p>
</dd></dl>

<dl class="attribute">
<dt id="plyr.Cache.source_url">
<tt class="descname">source_url</tt><a class="headerlink" href="#plyr.Cache.source_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL where this items was retrieved from.</p>
</dd></dl>

<dl class="attribute">
<dt id="plyr.Cache.timestamp">
<tt class="descname">timestamp</tt><a class="headerlink" href="#plyr.Cache.timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>If is_cached is True, a timestamp of the insertion sec.ms, otherwise 0.</p>
</dd></dl>

<dl class="method">
<dt id="plyr.Cache.update_checksum">
<tt class="descname">update_checksum</tt><big>(</big><big>)</big><a class="headerlink" href="#plyr.Cache.update_checksum" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the checksum manually.</p>
<p>This should never be necessary in this wrapper though.</p>
</dd></dl>

<dl class="method">
<dt id="plyr.Cache.write">
<tt class="descname">write</tt><big>(</big><big>)</big><a class="headerlink" href="#plyr.Cache.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write item content (data) to a valid path.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Path :</th><td class="field-body">Must be a valid path.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Retrieved Items (aka ,,Caches&#8217;&#8216;)</a><ul>
<li><a class="reference internal" href="#what-is-a-cache">What is a Cache?</a></li>
<li><a class="reference internal" href="#what-can-i-do-with-one">What can I do with one?</a></li>
<li><a class="reference internal" href="#reference">Reference</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="query.html"
                        title="previous chapter">Building Queries</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="provider.html"
                        title="next chapter">Looking up Providers</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/cache.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="provider.html" title="Looking up Providers"
             >next</a> |</li>
        <li class="right" >
          <a href="query.html" title="Building Queries"
             >previous</a> |</li>
        <li><a href="index.html">python-glyr 0.9.9beta documentation</a> &raquo;</li> 
      </ul>
    </div>
<div class="footer">
    &copy; Copyright 2012, Christoper Pahl.
  Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
  <br />Theme based on <a href="http://readthedocs.org/">Read The Docs</a>

</div>





  </body>
</html>